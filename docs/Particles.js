import{c as a,aG as t,aT as e,aY as o,ay as r,aH as i,aA as s}from"./vendor.js";import{m as n}from"./mergeConfig.js";class d{constructor(a){var{artifact:t,model:e,preload:o}=a;this.preload=o,this.model=e,this.defaultBox={x:10,y:10,z:10},this.config=n(t,{particles:[{name:"snowflake.png",size:.1,box:this.defaultBox}]}),this.materials=[]}init(){var n=this;return a((function*(){var d=n.preload.textureLoader,l=new t;yield Promise.all(n.config.particles.map(function(){var t=a((function*(a){for(var{box:t=n.defaultBox,color:m=16777215,count:c=1e3,name:p,size:f,opacity:h=1}=a,u=yield n.preload.promisifiedLoad({loader:d,file:"https://static.artificialmuseum.com/textures/matcap/".concat(p)}),x=new e({size:f,map:u,color:m,blending:o,depthTest:!1,transparent:!0,opacity:h}),v=new r,y=[],M=0;M<c;M++){var z=void 0;if(0===t.xMin)z=Math.random()*t.x;else z=(Math.random()>.5?-1:1)*Math.random()*(2*t.x)-t.x;var g=Math.random()*t.y,w=void 0;if(0===t.zMin)w=Math.random()*t.z;else w=(Math.random()>.5?-1:1)*Math.random()*(2*t.z)-t.z;y.push(z,g,w)}v.setAttribute("position",new i(y,3));var b=new s(v,x);l.add(b)}));return function(a){return t.apply(this,arguments)}}())),n.model.add(l),n.particles=l}))()}update(a){this.particles.rotation.y+=.01*a}}export{d as Particles};
