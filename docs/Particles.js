import{I as a,c as t,am as e,s as r,al as o,b6 as i,aM as s,aT as n,an as d}from"./vendor.js";class l{constructor(t){var{artifact:e,model:r,preload:o}=t;this.preload=o,this.model=r,this.defaultBox={x:10,y:10,z:10},this.particles=a(e.particles,[{name:"snowflake",size:.1,box:this.defaultBox}]),this.materials=[]}init(){var a=this;return t((function*(){var l=a.preload.textureLoader,c=new e;yield Promise.all(a.particles.map(function(){var e=t((function*(t){var{box:e=a.defaultBox,color:p=16777215,count:m=1e3,name:h,size:u,imgType:f="png",opacity:v=1}=t,x=h;x.endsWith(".".concat(f))&&(x=x.replace(".".concat(f),"")),r.WEBP?x+=".webp":x+=".".concat(f);for(var M=yield a.preload.promisifiedLoad({loader:l,file:"https://static.artificialmuseum.com/textures/matcap/".concat(x)}),y=new o({size:u,map:M,color:p,blending:i,depthTest:!1,transparent:!0,opacity:v}),z=new s,w=[],b=0;b<m;b++){var B=void 0;if(0===e.xMin)B=Math.random()*e.x;else B=(Math.random()>.5?-1:1)*Math.random()*(2*e.x)-e.x;var g=Math.random()*e.y,T=void 0;if(0===e.zMin)T=Math.random()*e.z;else T=(Math.random()>.5?-1:1)*Math.random()*(2*e.z)-e.z;w.push(B,g,T)}z.setAttribute("position",new n(w,3));var L=new d(z,y);c.add(L)}));return function(a){return e.apply(this,arguments)}}())),a.model.add(c),a.particles=c}))()}update(a){var{delta:t}=a;this.particles.rotation.y+=.01*t}}export{l as Particles};
