import{D as e,aZ as t}from"./vendor.js";class i{constructor(i){var{clickables:a,engine:n}=i;this.clickables=a,this.engine=n,this.rotationMatrix=new e,this.raycaster=new t,this.click=this.click.bind(this),this.select=this.select.bind(this)}click(e){var{clickables:t,raycaster:i}=this,{camera:a,renderer:n}=this.engine,r=e.clientX/n.domElement.clientWidth*2-1,s=-e.clientY/n.domElement.clientHeight*2+1;i.setFromCamera({x:r,y:s},a);var c=i.intersectObjects(t,!0);this.handle(c)}select(){var{clickables:e,raycaster:t,rotationMatrix:i}=this,{controller:a}=this.engine;i.extractRotation(a.matrixWorld),t.ray.origin.setFromMatrixPosition(a.matrixWorld),t.ray.direction.set(0,0,-1).applyMatrix4(clickRotationMatrix);var n=t.intersectObjects(e,!0);this.handle(n)}handle(e){var t,i=[16711680,65280,255,65535,16776960,16711935,5570645,21845,5592320],a=[];return e.forEach((e=>{var{object:t}=e;if(t.name&&!a.includes(t.name)){a.push(t.name);var n=Math.floor(Math.random()*i.length);t.material.color.set(i[n])}})),null!==(t=this.engine.sceneInstance)&&void 0!==t&&t.handleIntersects?this.engine.sceneInstance.handleIntersects(a):a}}export{i as Controls};
