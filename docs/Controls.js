import{E as t,b4 as e}from"./vendor.js";class i{constructor(i){var{clickables:r,engine:s}=i;this.clickables=r,this.engine=s,this.rotationMatrix=new t,this.raycaster=new e,this.click=this.click.bind(this),this.select=this.select.bind(this)}click(t){var{clickables:e}=this;if(!0===e)this.handle();else{var{raycaster:i}=this,{camera:r,renderer:s}=this.engine,a=t.clientX/s.domElement.clientWidth*2-1,n=-t.clientY/s.domElement.clientHeight*2+1;i.setFromCamera({x:a,y:n},r);var c=i.intersectObjects(e,!0);this.handle(c)}}select(){var{clickables:t}=this;if(!0===t)this.handle();else{var{raycaster:e,rotationMatrix:i}=this,{controller:r}=this.engine;i.extractRotation(r.matrixWorld),e.ray.origin.setFromMatrixPosition(r.matrixWorld),e.ray.direction.set(0,0,-1).applyMatrix4(i);var s=e.intersectObjects(t,!0);this.handle(s)}}handle(){var t=new Set(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]),e=Array.from(t);return this.engine.onTouch(e),e}}export{i as Controls};
