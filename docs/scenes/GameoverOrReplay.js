class i{constructor(i){var{artifact:t}=i,{distanceModifier:a=1,distanceThreshold:e=2,minAlpha:r=.1,maxAlpha:s=1}=t;this.distanceModifier=a,this.distanceThreshold=e,this.minAlpha=r,this.maxAlpha=s}init(i){var{engine:t,preload:a}=i;this.engine=t,this.camera=t.camera;var{scene:e}=a.assets.gltf;this.trigger={},this.hidden={},e.traverse((i=>{if(i.name.startsWith("trigger_")){var t=i.name.replace("trigger_","");this.trigger[t]=i}else if(i.name.startsWith("hidden_")){var a=i.name.replace("hidden_","");this.hidden[a]=i}}))}calculateAlpha(){var i=Object.entries(this.trigger).map((i=>{var[t,a]=i,e=this.distanceThreshold*this.distanceThreshold,r=this.camera.position.distanceToSquared(a.position)-e,s=((100-Math.max(0,r)*this.distanceModifier)/100).toFixed(2);return[t,Math.min(Math.max(this.minAlpha,s),this.maxAlpha)]}));return Object.fromEntries(i)}tick(){var i=this.calculateAlpha();Object.entries(i).map((i=>{var[t,a]=i;this.hidden[t].material.opacity=a}))}}export{i as default};
